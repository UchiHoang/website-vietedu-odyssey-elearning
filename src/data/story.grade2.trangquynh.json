{
  "meta": {
    "storyPackId": "trangquynh-2025",
    "title": "Trạng Quỳnh đi thi",
    "layout": "left-to-right",
    "locale": "vi",
    "description": "Cậu bé Trạng Quỳnh chuẩn bị đi thi Toán rồi đó! Hãy giúp Quỳnh vượt qua từng màn thử thách và trở thành \"Trạng nhí thông minh\" nhé!"
  },
  "legalNote": "Create original character artwork only. Use only user-provided images in /public/assets/user/. Do NOT copy or reproduce any copyrighted art from existing works (for example, do NOT replicate artwork from 'Thần đồng đất Việt').",
  "prologue": [
    {
      "id": "p1",
      "bg": "assets/user/bg_festival.png",
      "sprite": "assets/user/trang_idle.png",
      "speaker": "Người kể chuyện",
      "text": "Ngày xưa, ở một ngôi làng nhỏ bên bờ sông Hồng, có một cậu bé tên là Trạng Quỳnh. Cậu nổi tiếng thông minh, lanh lợi và rất giỏi toán."
    },
    {
      "id": "p2",
      "bg": "assets/user/bg_festival.png",
      "sprite": "assets/user/trang_cheer.png",
      "speaker": "Người kể chuyện",
      "text": "Một ngày nọ, tin đồn lan rộng về một cuộc thi toán lớn ở làng bên. Người chiến thắng sẽ nhận được phần thưởng vô cùng giá trị và danh hiệu 'Thần đồng toán học'."
    },
    {
      "id": "p3",
      "bg": "assets/user/bg_market.png",
      "sprite": "assets/user/trang_idle.png",
      "speaker": "Trạng Quỳnh",
      "text": "Ta phải tham gia cuộc thi này! Đây là cơ hội để ta chứng minh trí tuệ và giúp đỡ bà con trong làng."
    },
    {
      "id": "p4",
      "bg": "assets/user/bg_market.png",
      "sprite": "assets/user/trang_portrait.png",
      "speaker": "Người kể chuyện",
      "text": "Và thế là, Trạng Quỳnh bắt đầu hành trình đến làng bên. Trên đường đi, cậu sẽ gặp nhiều thử thách toán học thú vị."
    },
    {
      "id": "p5",
      "bg": "assets/user/bg_market.png",
      "sprite": "assets/user/trang_cheer.png",
      "speaker": "Người kể chuyện",
      "text": "Hãy cùng Trạng Quỳnh vượt qua các thử thách về phép cộng, phép trừ, đo lường, thời gian và tiền tệ. Mỗi thử thách vượt qua sẽ đưa cậu đến gần hơn với giấc mơ của mình!"
    }
  ],
  "nodes": [
    {
      "id": "n1",
      "order": 1,
      "title": "Khởi đầu: Làng Thi Nhỏ",
      "mathTopic": "Addition within 100",
      "objective": "Cộng trong phạm vi 100 (cộng có nhớ nhẹ)",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Tin đồn có cuộc thi toán ở làng bên lan rộng. Trạng Quỳnh quyết định đi thi để giúp bà con."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ôi, thi toán sao? Ta thích thử xem trí quốc sĩ có sáng không!"
        },
        {
          "speaker": "Bà bán hàng",
          "text": "Con ơi, mua 7 trái táo nữa, hàng sắp hết rồi, con nhớ tính kĩ nhé."
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Tin đồn có cuộc thi toán ở làng bên lan rộng."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ôi, thi toán sao? Ta thích thử xem trí quốc sĩ có sáng không!"
        },
        {
          "speaker": "Bà bán hàng",
          "text": "Con ơi, mua 7 trái táo nữa, hàng sắp hết rồi, con nhớ tính kĩ nhé."
        }
      ],
      "assets": {
        "bg": "assets/user/bg_market.png",
        "sprite_main_idle": "assets/user/trang_idle.png",
        "sprite_main_cheer": "assets/user/trang_cheer.png",
        "icon": "assets/user/icon_apple.png",
        "alt": {
          "bg": "Chợ làng",
          "sprite_main_idle": "Trạng Quỳnh đứng cười",
          "icon": "Hình táo"
        }
      },
      "activityRef": "grade2.c1.l1.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": "quick-math",
      "hint": "Hiển thị trực quan số táo để trẻ đếm"
    },
    {
      "id": "n2",
      "order": 2,
      "title": "Thử thách trên cầu",
      "mathTopic": "Subtraction within 100 (borrow)",
      "objective": "Trừ trong phạm vi 100 (mượn đơn giản)",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh tới cầu, người thu vé hỏi một câu toán để cho qua."
        },
        {
          "speaker": "Người thu vé",
          "text": "Giải trước ta: 42 - 19 = ?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Để ta mượn một chút trí óc…"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh tới cầu, người thu vé hỏi một câu toán để cho qua."
        },
        {
          "speaker": "Người thu vé",
          "text": "Giải trước ta: 42 trừ 19 bằng bao nhiêu?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Để ta mượn một chút trí óc…"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_bridge.png",
        "sprite_main_think": "assets/user/trang_think.png",
        "sprite_guard": "assets/user/guard.png",
        "icon": "assets/user/icon_ticket.png",
        "alt": {
          "bg": "Cầu nhỏ qua sông",
          "sprite_main_think": "Trạng Quỳnh suy nghĩ",
          "icon": "Vé thi"
        }
      },
      "activityRef": "grade2.c1.l2.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Hiển thị quy trình mượn khi trừ (tách hàng chục/hàng đơn vị)"
    },
    {
      "id": "n3",
      "order": 3,
      "title": "Bài thi vườn cau",
      "mathTopic": "Mixed addition & subtraction (word problem)",
      "objective": "Giải bài toán lời văn đơn giản",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Chủ vườn cau cần tính toán số cau còn lại sau khi bán và tặng."
        },
        {
          "speaker": "Chủ vườn",
          "text": "Chúng tôi có 50 buồng cau, bán 17 buồng, rồi cho 6 buồng — còn lại bao nhiêu?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta chia nhỏ rồi tính — nhanh thôi!"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Chủ vườn cau cần tính toán số cau còn lại."
        },
        {
          "speaker": "Chủ vườn",
          "text": "Chúng tôi có 50 buồng cau, bán 17 buồng, rồi cho 6 buồng — còn lại bao nhiêu?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta chia nhỏ rồi tính — nhanh thôi!"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_areca_garden.png",
        "sprite_owner": "assets/user/farmer.png",
        "sprite_main_idle": "assets/user/trang_idle.png",
        "icon": "assets/user/icon_bunch.png",
        "alt": {
          "bg": "Vườn cau",
          "sprite_owner": "Chủ vườn cau",
          "icon": "Bó cau"
        }
      },
      "activityRef": "grade2.c1.l3.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Cho trẻ kéo-thả hoặc biểu diễn bằng số để minh họa hành động bán và cho"
    },
    {
      "id": "n4",
      "order": 4,
      "title": "Thời gian lên lớp",
      "mathTopic": "Time - hour and half-hour",
      "objective": "Nhận biết giờ chẵn và giờ rưỡi (đọc đồng hồ)",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh giúp cô giáo điểm danh. Đồng hồ trường reo chuông."
        },
        {
          "speaker": "Cô giáo",
          "text": "Trạng Quỳnh, đồng hồ kia chỉ mấy giờ?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ba giờ rưỡi — cô ơi, mau vào lớp thôi!"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh giúp cô giáo điểm danh."
        },
        {
          "speaker": "Cô giáo",
          "text": "Trạng Quỳnh, đồng hồ kia chỉ mấy giờ?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ba giờ rưỡi — cô ơi, mau vào lớp thôi!"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_classroom.png",
        "sprite_teacher": "assets/user/teacher.png",
        "sprite_clock": "assets/user/clock_face.png",
        "sprite_main_cheer": "assets/user/trang_cheer.png",
        "icon": "assets/user/icon_clock.png",
        "alt": {
          "bg": "Lớp học",
          "sprite_clock": "Đồng hồ trường",
          "icon": "Hình đồng hồ"
        }
      },
      "activityRef": "grade2.c2.l1.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Dùng đồng hồ SVG cho phép click kim phút/giờ"
    },
    {
      "id": "n5",
      "order": 5,
      "title": "Đo đạc ở ao sen",
      "mathTopic": "Length comparison (cm / m)",
      "objective": "So sánh độ dài, khái niệm cm và m",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh giúp người chài đo dây câu cá tại ao sen."
        },
        {
          "speaker": "Người chài",
          "text": "Dây A dài 120 cm, dây B dài 1 m 30 cm — dây nào dài hơn?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "1 m 30 cm = 130 cm → B dài hơn A!"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Trạng Quỳnh giúp người chài đo dây câu cá."
        },
        {
          "speaker": "Người chài",
          "text": "Dây A dài 120 cm, dây B dài 1 mét 30 cm — dây nào dài hơn?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "1 mét 30 cm bằng 130 cm nên B dài hơn A!"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_pond.png",
        "sprite_fisher": "assets/user/fisher.png",
        "sprite_ruler": "assets/user/ruler.png",
        "icon": "assets/user/icon_ruler.png",
        "alt": {
          "bg": "Ao sen",
          "sprite_ruler": "Thước đo",
          "icon": "Hình thước"
        }
      },
      "activityRef": "grade2.c2.l2.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Hiển thị chuyển đổi cm ↔ m trực quan"
    },
    {
      "id": "n6",
      "order": 6,
      "title": "Cân gạo cho mẹ",
      "mathTopic": "Mass (kg / g)",
      "objective": "Nhận biết đơn vị kg và g, so sánh khối lượng",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Mẹ nhờ Trạng Quỳnh cân gạo chuẩn bị nấu cơm cho buổi lễ."
        },
        {
          "speaker": "Mẹ",
          "text": "Cân giúp mẹ 2 kg gạo nhé."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta biết 1 kg = 1000 g, vậy 2 kg = 2000 g."
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Mẹ nhờ Trạng Quỳnh cân gạo."
        },
        {
          "speaker": "Mẹ",
          "text": "Cân giúp mẹ 2 kg gạo nhé."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "1 kg bằng 1000 gram, vậy 2 kg bằng 2000 gram."
        }
      ],
      "assets": {
        "bg": "assets/user/bg_kitchen.png",
        "sprite_mother": "assets/user/mother.png",
        "sprite_scale": "assets/user/scale.png",
        "icon": "assets/user/icon_sack.png",
        "alt": {
          "bg": "Bếp nhà",
          "sprite_scale": "Cái cân gạo",
          "icon": "Túi gạo"
        }
      },
      "activityRef": "grade2.c2.l3.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": "logical-thinker",
      "hint": "Minh họa kg ↔ g bằng quả cân đồ chơi"
    },
    {
      "id": "n7",
      "order": 7,
      "title": "Tiền thưởng của làng",
      "mathTopic": "Money (basic division/parts)",
      "objective": "Tính tiền, chia đều, cộng/trừ tiền lẻ đơn giản",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Sau thi, làng trao tiền thưởng và nhờ Trạng Quỳnh chia đều cho mọi người."
        },
        {
          "speaker": "Bạn",
          "text": "Chia đều với tớ nhé, cậu có 50.000 đồng, chia cho 5 người mỗi người bao nhiêu?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "50.000 : 5 = 10.000 mỗi người."
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Sau thi, làng trao tiền thưởng."
        },
        {
          "speaker": "Bạn",
          "text": "Cậu có 50.000 đồng, chia cho 5 người mỗi người bao nhiêu?"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Mỗi người 10.000 đồng."
        }
      ],
      "assets": {
        "bg": "assets/user/bg_village_square.png",
        "sprite_money_box": "assets/user/money_box.png",
        "sprite_main_cheer": "assets/user/trang_cheer.png",
        "icon": "assets/user/icon_money.png",
        "alt": {
          "bg": "Quảng trường làng",
          "sprite_money_box": "Hòm tiền thưởng",
          "icon": "Tiền giấy"
        }
      },
      "activityRef": "grade2.c3.l1.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Thiết kế bài toán chia/bổ sung tiền với phép chia đơn giản"
    },
    {
      "id": "n8",
      "order": 8,
      "title": "Đố mẹo trong đình làng",
      "mathTopic": "Comparison & logic puzzles",
      "objective": "So sánh, sắp xếp, tư duy logic cơ bản",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Bô lão tổ chức trò đố mẹo cho trẻ — ai trả lời đúng sẽ nhận kẹo."
        },
        {
          "speaker": "Bô lão",
          "text": "Ai xếp đúng thứ tự từ nhỏ đến lớn sẽ nhận kẹo!"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta xếp ngay — dễ như cơm bữa!"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Bô lão tổ chức trò đố mẹo trong đình làng."
        },
        {
          "speaker": "Bô lão",
          "text": "Ai xếp đúng thứ tự từ nhỏ đến lớn sẽ nhận kẹo!"
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta xếp ngay — dễ thôi!"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_communal_house.png",
        "sprite_elder": "assets/user/elder.png",
        "sprite_main_think": "assets/user/trang_think.png",
        "icon": "assets/user/icon_puzzle.png",
        "alt": {
          "bg": "Đình làng",
          "sprite_elder": "Bô lão",
          "icon": "Câu đố"
        }
      },
      "activityRef": "grade2.c3.l2.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": null,
      "hint": "Sử dụng các mảnh ghép kéo thả để sắp xếp"
    },
    {
      "id": "n9",
      "order": 9,
      "title": "Đêm trao huy hiệu",
      "mathTopic": "Final review (mixed)",
      "objective": "Ôn tập tổng hợp, thử thách tốc độ và chính xác",
      "cutscene": [
        {
          "speaker": "Narrator",
          "text": "Đêm trao huy hiệu đã tới. Ai đạt đủ điểm sẽ nhận huy hiệu vàng."
        },
        {
          "speaker": "Quan thi",
          "text": "Ai trả lời được 8/10 câu đúng trong thời gian sẽ nhận huy hiệu vàng."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta sẽ làm cho làng biết ta thông minh nhưng vẫn khiêm nhường!"
        }
      ],
      "voiceLines": [
        {
          "speaker": "Narrator",
          "text": "Đêm trao huy hiệu đã tới."
        },
        {
          "speaker": "Quan thi",
          "text": "Ai trả lời được 8 trên 10 câu đúng sẽ nhận huy hiệu vàng."
        },
        {
          "speaker": "Trạng Quỳnh",
          "text": "Ta sẽ làm tốt thôi!"
        }
      ],
      "assets": {
        "bg": "assets/user/bg_festival.png",
        "sprite_master": "assets/user/judge.png",
        "sprite_main_cheer": "assets/user/trang_cheer.png",
        "icon": "assets/user/icon_badge.png",
        "alt": {
          "bg": "Sân đình lễ hội",
          "sprite_master": "Quan thi",
          "icon": "Huy hiệu"
        }
      },
      "activityRef": "grade2.c4.l1.a1",
      "xpOnCorrect": 10,
      "badgeOnComplete": "grade2-master",
      "hint": "Tổng hợp các câu hỏi nhanh của các chủ đề trước"
    }
  ]
}