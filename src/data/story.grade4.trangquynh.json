{
  "meta": {
    "title": "Thánh Gióng bay về trời",
    "description": "Theo chân Thánh Gióng luyện Toán: phân số, số lớn, trung bình cộng."
  },
  "prologue": [
    { "speaker": "Sứ Giả", "text": "Nhà vua cần người tài cứu nước, Gióng hãy lớn nhanh!" },
    { "speaker": "Thánh Gióng", "text": "Hãy giúp ta tính toán để rèn ngựa, giáp, roi sắt." },
    { "speaker": "Người kể chuyện", "text": "Phân số, số lớn, trung bình cộng sẽ là thử thách của bạn." }
  ],
  "nodes": [
    { "id": "g4-l1", "title": "Tiếng Loa Sứ Giả", "badgeOnComplete": "g4-l1", "activityRef": "g4-l1-qs", "cutscene": [{ "speaker": "Sứ Giả", "text": "Tính nhanh để báo vua!" }] },
    { "id": "g4-l2", "title": "Cơm Cà Của Mẹ", "badgeOnComplete": "g4-l2", "activityRef": "g4-l2-qs", "cutscene": [{ "speaker": "Mẹ Gióng", "text": "Chia cơm đều cho con, dùng phân số nhé." }] },
    { "id": "g4-l3", "title": "Gióng Vươn Vai", "badgeOnComplete": "g4-l3", "activityRef": "g4-l3-qs", "cutscene": [{ "speaker": "Người kể chuyện", "text": "Gióng lớn nhanh, cộng các số lớn kiểm tra sức." }] },
    { "id": "g4-l4", "title": "Lời Hứa Nhà Vua", "badgeOnComplete": "g4-l4", "activityRef": "g4-l4-qs", "cutscene": [{ "speaker": "Vua", "text": "Chuẩn bị đủ lương thực, tính trung bình cho quân." }] },
    { "id": "g4-l5", "title": "Dân Làng Góp Gạo", "badgeOnComplete": "g4-l5", "activityRef": "g4-l5-qs", "cutscene": [{ "speaker": "Dân Làng", "text": "Gộp thóc thành bao lớn, so sánh số." }] },
    { "id": "g4-l6", "title": "Rèn Ngựa Sắt", "badgeOnComplete": "g4-l6", "activityRef": "g4-l6-qs", "cutscene": [{ "speaker": "Thợ rèn", "text": "Cắt thép theo phân số độ dài." }] },
    { "id": "g4-l7", "title": "Đúc Giáp Vàng", "badgeOnComplete": "g4-l7", "activityRef": "g4-l7-qs", "cutscene": [{ "speaker": "Thánh Gióng", "text": "Tính diện tích tấm giáp, số lớn cần chính xác." }] },
    { "id": "g4-l8", "title": "Rèn Roi Sắt", "badgeOnComplete": "g4-l8", "activityRef": "g4-l8-qs", "cutscene": [{ "speaker": "Người kể chuyện", "text": "Chia đoạn roi theo tỉ lệ phân số." }] },
    { "id": "g4-l9", "title": "Ngựa Sắt Hí Vang", "badgeOnComplete": "g4-l9", "activityRef": "g4-l9-qs", "cutscene": [{ "speaker": "Ngựa Sắt", "text": "Kiểm tra sức bằng phép cộng số lớn." }] },
    { "id": "g4-l10", "title": "Ra Quân Đánh Giặc", "badgeOnComplete": "g4-l10", "activityRef": "g4-l10-qs", "cutscene": [{ "speaker": "Thánh Gióng", "text": "Chia quân đều, tính trung bình để sắp đội hình." }] },
    { "id": "g4-l11", "title": "Trận Chiến Vũ Ninh", "badgeOnComplete": "g4-l11", "activityRef": "g4-l11-qs", "cutscene": [{ "speaker": "Người kể chuyện", "text": "So sánh vũ khí, chọn phân số lớn hơn." }] },
    { "id": "g4-l12", "title": "Gióng Nhổ Tre Ngà", "badgeOnComplete": "g4-l12", "activityRef": "g4-l12-qs", "cutscene": [{ "speaker": "Thánh Gióng", "text": "Bó tre thành bó đều nhau." }] },
    { "id": "g4-l13", "title": "Quét Sạch Giặc Ân", "badgeOnComplete": "g4-l13", "activityRef": "g4-l13-qs", "cutscene": [{ "speaker": "Người kể chuyện", "text": "Cộng trừ số lớn khi đếm chiến công." }] },
    { "id": "g4-l14", "title": "Lên Đỉnh Núi Sóc", "badgeOnComplete": "g4-l14", "activityRef": "g4-l14-qs", "cutscene": [{ "speaker": "Thánh Gióng", "text": "Tính độ cao trung bình từng chặng." }] },
    { "id": "g4-l15", "title": "Bay Về Trời", "badgeOnComplete": "g4-l15", "activityRef": "g4-l15-qs", "cutscene": [{ "speaker": "Người kể chuyện", "text": "Bài tổng hợp cuối cùng trước khi Gióng bay lên trời." }] }
  ],
  "activities": [
    {
      "id": "g4-l1-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l1-q1", "type": "multiple-choice", "prompt": "200 000 + 35 000 = ?", "choices": ["225 000", "230 000", "235 000", "240 000"], "answer": "235 000", "explanation": "Cộng số lớn hàng vạn." },
        { "id": "g4-l1-q2", "type": "matching-pairs", "question": "Ghép phân số với cách đọc", "pairs": [{ "id": "p1", "left": "1/2", "right": "một phần hai" }, { "id": "p2", "left": "3/4", "right": "ba phần tư" }, { "id": "p3", "left": "2/3", "right": "hai phần ba" }], "explanation": "Đọc đúng phân số." },
        { "id": "g4-l1-q3", "type": "fill-blank", "question": "500 000 - 120 000 = __", "blanks": [{ "position": 0, "answer": "380 000" }], "explanation": "Trừ số lớn." }
      ]
    },
    {
      "id": "g4-l2-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l2-q1", "type": "multiple-choice", "prompt": "Chia 1 chiếc bánh thành 4 phần bằng nhau, mỗi phần là?", "choices": ["1/2", "1/3", "1/4", "2/4"], "answer": "1/4", "explanation": "Mỗi phần là một phần tư." },
        { "id": "g4-l2-q2", "type": "drag-drop", "question": "Kéo phân số vào hình đúng", "dragItems": [{ "id": "f1", "content": "1/2", "correctSlot": "slot-half" }, { "id": "f2", "content": "1/4", "correctSlot": "slot-quarter" }], "dropSlots": [{ "id": "slot-half", "label": "Hình tô nửa" }, { "id": "slot-quarter", "label": "Hình tô một phần tư" }], "explanation": "Ghép phân số với phần tô." },
        { "id": "g4-l2-q3", "type": "fill-blank", "question": "3/4 > 1/__ ?", "blanks": [{ "position": 0, "answer": "2" }], "explanation": "3/4 lớn hơn 1/2." }
      ]
    },
    {
      "id": "g4-l3-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l3-q1", "type": "multiple-choice", "prompt": "Số lớn nhất: 905 430; 904 999; 905 300", "choices": ["905 430", "904 999", "905 300"], "answer": "905 430", "explanation": "So sánh hàng nghìn, trăm." },
        { "id": "g4-l3-q2", "type": "matching-pairs", "question": "Ghép số với giá trị hàng", "pairs": [{ "id": "p1", "left": "900 000", "right": "chín trăm nghìn" }, { "id": "p2", "left": "5 000", "right": "năm nghìn" }, { "id": "p3", "left": "430", "right": "bốn trăm ba mươi" }], "explanation": "Phân tích 905 430." },
        { "id": "g4-l3-q3", "type": "fill-blank", "question": "905 430 + 70 = __", "blanks": [{ "position": 0, "answer": "905 500" }], "explanation": "Cộng đơn giản." }
      ]
    },
    {
      "id": "g4-l4-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l4-q1", "type": "multiple-choice", "prompt": "Trung bình cộng của 12 và 16 là?", "choices": ["13", "14", "15", "16"], "answer": "14", "explanation": "(12+16)/2=14." },
        { "id": "g4-l4-q2", "type": "matching-pairs", "question": "Ghép công thức", "pairs": [{ "id": "p1", "left": "TBC 3 số", "right": "Tổng : 3" }, { "id": "p2", "left": "TBC 2 số", "right": "Tổng : 2" }, { "id": "p3", "left": "Tổng", "right": "Cộng các số" }], "explanation": "Nhớ công thức trung bình cộng." },
        { "id": "g4-l4-q3", "type": "fill-blank", "question": "TBC của 10, 12, 14 là __", "blanks": [{ "position": 0, "answer": "12" }], "explanation": "10+12+14=36; 36:3=12." }
      ]
    },
    {
      "id": "g4-l5-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l5-q1", "type": "multiple-choice", "prompt": "Bao thóc A 125 000 kg, B 118 000 kg. Bao nào nặng hơn?", "choices": ["A", "B", "Bằng nhau"], "answer": "A", "explanation": "125 000 > 118 000." },
        { "id": "g4-l5-q2", "type": "drag-drop", "question": "Kéo dấu so sánh", "dragItems": [{ "id": "gt", "content": ">", "correctSlot": "slot-ab" }, { "id": "lt", "content": "<", "correctSlot": "slot-ba" }], "dropSlots": [{ "id": "slot-ab", "label": "125 000 __ 118 000" }, { "id": "slot-ba", "label": "118 000 __ 125 000" }], "explanation": "125 000 lớn hơn." },
        { "id": "g4-l5-q3", "type": "fill-blank", "question": "125 000 - 5 000 = __", "blanks": [{ "position": 0, "answer": "120 000" }], "explanation": "Trừ số lớn." }
      ]
    },
    {
      "id": "g4-l6-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l6-q1", "type": "multiple-choice", "prompt": "Thép dài 3/4 m, cắt 1/4 m còn?", "choices": ["1/2 m", "2/4 m", "3/4 m", "1/4 m"], "answer": "1/2 m", "explanation": "3/4 - 1/4 = 2/4 = 1/2." },
        { "id": "g4-l6-q2", "type": "matching-pairs", "question": "Ghép phân số bằng nhau", "pairs": [{ "id": "p1", "left": "2/4", "right": "1/2" }, { "id": "p2", "left": "3/6", "right": "1/2" }, { "id": "p3", "left": "4/8", "right": "1/2" }], "explanation": "Các phân số tối giản." },
        { "id": "g4-l6-q3", "type": "fill-blank", "question": "1/3 + 1/3 = __", "blanks": [{ "position": 0, "answer": "2/3" }], "explanation": "Cộng phân số cùng mẫu." }
      ]
    },
    {
      "id": "g4-l7-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l7-q1", "type": "multiple-choice", "prompt": "Giáp hình chữ nhật 6 m x 4 m. Diện tích?", "choices": ["20", "22", "24", "26"], "answer": "24", "explanation": "6 x 4 = 24 m2." },
        { "id": "g4-l7-q2", "type": "drag-drop", "question": "Kéo đơn vị đúng", "dragItems": [{ "id": "m2", "content": "m2", "correctSlot": "slot-area" }, { "id": "m", "content": "m", "correctSlot": "slot-length" }], "dropSlots": [{ "id": "slot-area", "label": "Diện tích" }, { "id": "slot-length", "label": "Chu vi" }], "explanation": "Diện tích dùng m2." },
        { "id": "g4-l7-q3", "type": "fill-blank", "question": "Chu vi 6 m x 4 m = __ m", "blanks": [{ "position": 0, "answer": "20" }], "explanation": "(6+4)*2=20." }
      ]
    },
    {
      "id": "g4-l8-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l8-q1", "type": "multiple-choice", "prompt": "Roi dài 2 m, chia 4 đoạn đều, mỗi đoạn?", "choices": ["1/2 m", "1/3 m", "1/4 m", "3/4 m"], "answer": "1/2 m", "explanation": "2 m / 4 = 0.5 m = 1/2 m." },
        { "id": "g4-l8-q2", "type": "matching-pairs", "question": "Ghép phân số với thập phân", "pairs": [{ "id": "p1", "left": "1/2", "right": "0,5" }, { "id": "p2", "left": "1/4", "right": "0,25" }, { "id": "p3", "left": "3/4", "right": "0,75" }], "explanation": "Chuyển đổi phân số-thập phân." },
        { "id": "g4-l8-q3", "type": "fill-blank", "question": "3/4 - 1/4 = __", "blanks": [{ "position": 0, "answer": "1/2" }], "explanation": "Trừ phân số cùng mẫu." }
      ]
    },
    {
      "id": "g4-l9-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l9-q1", "type": "multiple-choice", "prompt": "180 000 + 25 000 = ?", "choices": ["195 000", "200 000", "205 000", "210 000"], "answer": "205 000", "explanation": "Cộng số lớn." },
        { "id": "g4-l9-q2", "type": "drag-drop", "question": "Kéo dấu đúng", "dragItems": [{ "id": "gt", "content": ">", "correctSlot": "slot-205" }, { "id": "lt", "content": "<", "correctSlot": "slot-180" }], "dropSlots": [{ "id": "slot-205", "label": "205 000 __ 180 000" }, { "id": "slot-180", "label": "180 000 __ 205 000" }], "explanation": "205 000 lớn hơn 180 000." },
        { "id": "g4-l9-q3", "type": "fill-blank", "question": "205 000 - 5 000 = __", "blanks": [{ "position": 0, "answer": "200 000" }], "explanation": "Trừ số lớn." }
      ]
    },
    {
      "id": "g4-l10-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l10-q1", "type": "multiple-choice", "prompt": "Trung bình cộng của 18, 20, 22 là?", "choices": ["19", "20", "21", "22"], "answer": "20", "explanation": "18+20+22=60; 60:3=20." },
        { "id": "g4-l10-q2", "type": "matching-pairs", "question": "Ghép nhóm quân với sĩ số", "pairs": [{ "id": "p1", "left": "Đội A 30", "right": "30" }, { "id": "p2", "left": "Đội B 20", "right": "20" }, { "id": "p3", "left": "Đội C 10", "right": "10" }], "explanation": "Đọc số lượng." },
        { "id": "g4-l10-q3", "type": "fill-blank", "question": "TBC của 25 và 35 = __", "blanks": [{ "position": 0, "answer": "30" }], "explanation": "(25+35)/2=30." }
      ]
    },
    {
      "id": "g4-l11-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l11-q1", "type": "multiple-choice", "prompt": "So sánh 5/6 và 3/4, phân số nào lớn hơn?", "choices": ["5/6", "3/4", "Bằng nhau"], "answer": "5/6", "explanation": "Quy đồng: 5/6 = 10/12; 3/4 = 9/12." },
        { "id": "g4-l11-q2", "type": "matching-pairs", "question": "Ghép phân số với giá trị thập phân", "pairs": [{ "id": "p1", "left": "1/5", "right": "0,2" }, { "id": "p2", "left": "2/5", "right": "0,4" }, { "id": "p3", "left": "3/5", "right": "0,6" }], "explanation": "Đổi phân số thập phân." },
        { "id": "g4-l11-q3", "type": "fill-blank", "question": "2/3 + 1/6 = __", "blanks": [{ "position": 0, "answer": "5/6" }], "explanation": "Quy đồng 2/3=4/6; 4/6+1/6=5/6." }
      ]
    },
    {
      "id": "g4-l12-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l12-q1", "type": "multiple-choice", "prompt": "Bó 24 cây tre thành 6 bó đều, mỗi bó?", "choices": ["3", "4", "5", "6"], "answer": "4", "explanation": "24 : 6 = 4." },
        { "id": "g4-l12-q2", "type": "drag-drop", "question": "Kéo số vào phép chia", "dragItems": [{ "id": "r4", "content": "4", "correctSlot": "slot-24div6" }, { "id": "r6", "content": "6", "correctSlot": "slot-36div6" }], "dropSlots": [{ "id": "slot-24div6", "label": "24 : 6" }, { "id": "slot-36div6", "label": "36 : 6" }], "explanation": "24:6=4; 36:6=6." },
        { "id": "g4-l12-q3", "type": "fill-blank", "question": "36 : 6 = __", "blanks": [{ "position": 0, "answer": "6" }], "explanation": "Chia đều." }
      ]
    },
    {
      "id": "g4-l13-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l13-q1", "type": "multiple-choice", "prompt": "500 000 - 125 000 = ?", "choices": ["365 000", "375 000", "380 000", "400 000"], "answer": "375 000", "explanation": "Trừ số lớn." },
        { "id": "g4-l13-q2", "type": "matching-pairs", "question": "Ghép phép tính", "pairs": [{ "id": "p1", "left": "250 000 + 100 000", "right": "350 000" }, { "id": "p2", "left": "375 000 + 5 000", "right": "380 000" }, { "id": "p3", "left": "400 000 - 25 000", "right": "375 000" }], "explanation": "Ôn cộng trừ số lớn." },
        { "id": "g4-l13-q3", "type": "fill-blank", "question": "375 000 + 125 000 = __", "blanks": [{ "position": 0, "answer": "500 000" }], "explanation": "Cộng ngược lại." }
      ]
    },
    {
      "id": "g4-l14-qs",
      "xpReward": 16,
      "questions": [
        { "id": "g4-l14-q1", "type": "multiple-choice", "prompt": "Độ cao 3 chặng: 120 m, 150 m, 180 m. TBC?", "choices": ["140 m", "150 m", "160 m", "170 m"], "answer": "150 m", "explanation": "(120+150+180)/3=150." },
        { "id": "g4-l14-q2", "type": "matching-pairs", "question": "Ghép thang độ cao", "pairs": [{ "id": "p1", "left": "120 m", "right": "Thấp" }, { "id": "p2", "left": "150 m", "right": "Vừa" }, { "id": "p3", "left": "180 m", "right": "Cao" }], "explanation": "So sánh độ cao." },
        { "id": "g4-l14-q3", "type": "fill-blank", "question": "150 m x 2 = __ m", "blanks": [{ "position": 0, "answer": "300" }], "explanation": "Nhân số lớn đơn giản." }
      ]
    },
    {
      "id": "g4-l15-qs",
      "xpReward": 18,
      "questions": [
        { "id": "g4-l15-q1", "type": "multiple-choice", "prompt": "Tổng 2/3 + 1/6 = ?", "choices": ["1/2", "3/6", "5/6", "1"], "answer": "5/6", "explanation": "2/3=4/6; 4/6+1/6=5/6." },
        { "id": "g4-l15-q2", "type": "matching-pairs", "question": "Ghép kết quả cuối", "pairs": [{ "id": "p1", "left": "200 000 + 300 000", "right": "500 000" }, { "id": "p2", "left": "500 000 - 120 000", "right": "380 000" }, { "id": "p3", "left": "1/2 + 1/4", "right": "3/4" }], "explanation": "Tổng hợp phân số và số lớn." },
        { "id": "g4-l15-q3", "type": "fill-blank", "question": "Trung bình cộng của 200 000 và 400 000 là __", "blanks": [{ "position": 0, "answer": "300 000" }], "explanation": "(200 000 + 400 000)/2 = 300 000." }
      ]
    }
  ]
}

